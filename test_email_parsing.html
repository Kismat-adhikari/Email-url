<!DOCTYPE html>
<html>
<head>
    <title>Email Parser Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
        }
        .test-case {
            margin: 20px 0;
            padding: 15px;
            background: #f0f0f0;
            border-radius: 8px;
        }
        .input {
            background: white;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            margin: 10px 0;
            font-family: monospace;
            white-space: pre-wrap;
        }
        .output {
            background: #e8f5e9;
            padding: 10px;
            border: 1px solid #4caf50;
            border-radius: 4px;
            margin: 10px 0;
        }
        h2 {
            color: #333;
        }
    </style>
</head>
<body>
    <h1>ðŸ“§ Smart Email Parser Test</h1>
    <p>This shows how the batch validator will parse different email formats:</p>

    <div class="test-case">
        <h2>Test 1: Comma-separated</h2>
        <div class="input">info@massawanyc.com, Catering@MassawaNYC.com, Info@MassawaNYC.com</div>
        <div class="output" id="test1"></div>
    </div>

    <div class="test-case">
        <h2>Test 2: With quotes (Excel export)</h2>
        <div class="input">"john@example.com","jane@test.com","admin@company.com"</div>
        <div class="output" id="test2"></div>
    </div>

    <div class="test-case">
        <h2>Test 3: Mixed format</h2>
        <div class="input">email1@test.com
email2@test.com, email3@test.com
"email4@test.com"; email5@test.com</div>
        <div class="output" id="test3"></div>
    </div>

    <div class="test-case">
        <h2>Test 4: With extra spaces</h2>
        <div class="input">  email1@test.com  ,   email2@test.com   ,
  email3@test.com  </div>
        <div class="output" id="test4"></div>
    </div>

    <div class="test-case">
        <h2>Test 5: Duplicates (will be removed)</h2>
        <div class="input">test@example.com
test@example.com
test@example.com, test@example.com</div>
        <div class="output" id="test5"></div>
    </div>

    <script>
        function parseEmails(text) {
            let emails = [];
            
            // Split by newlines, commas, and semicolons
            const parts = text.split(/[\n,;]+/);
            
            parts.forEach(part => {
                // Remove quotes and extra whitespace
                let cleaned = part
                    .replace(/["']/g, '')  // Remove quotes
                    .trim();
                
                // Check if it looks like an email
                if (cleaned && cleaned.includes('@')) {
                    emails.push(cleaned);
                }
            });
            
            // Remove duplicates
            return [...new Set(emails)];
        }

        // Test cases
        const test1 = "info@massawanyc.com, Catering@MassawaNYC.com, Info@MassawaNYC.com";
        const test2 = '"john@example.com","jane@test.com","admin@company.com"';
        const test3 = `email1@test.com
email2@test.com, email3@test.com
"email4@test.com"; email5@test.com`;
        const test4 = `  email1@test.com  ,   email2@test.com   ,
  email3@test.com  `;
        const test5 = `test@example.com
test@example.com
test@example.com, test@example.com`;

        // Display results
        document.getElementById('test1').innerHTML = `<strong>Found ${parseEmails(test1).length} emails:</strong><br>` + parseEmails(test1).map(e => `âœ“ ${e}`).join('<br>');
        document.getElementById('test2').innerHTML = `<strong>Found ${parseEmails(test2).length} emails:</strong><br>` + parseEmails(test2).map(e => `âœ“ ${e}`).join('<br>');
        document.getElementById('test3').innerHTML = `<strong>Found ${parseEmails(test3).length} emails:</strong><br>` + parseEmails(test3).map(e => `âœ“ ${e}`).join('<br>');
        document.getElementById('test4').innerHTML = `<strong>Found ${parseEmails(test4).length} emails:</strong><br>` + parseEmails(test4).map(e => `âœ“ ${e}`).join('<br>');
        document.getElementById('test5').innerHTML = `<strong>Found ${parseEmails(test5).length} emails (duplicates removed):</strong><br>` + parseEmails(test5).map(e => `âœ“ ${e}`).join('<br>');
    </script>
</body>
</html>
